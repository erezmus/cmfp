---
import { languages } from '@/i18n/ui';
import { getLangFromUrl, getSwitchLangUrl } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);

---

<ul class="navbar-nav mr-4">
  <li class="nav-item nav-dropdown group relative">
    <span class="nav-link inline-flex items-center">
      {languages[lang]}
      <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
        <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
      </svg>
    </span>
    <ul class="nav-dropdown-list hidden group-hover:block lg:invisible lg:absolute lg:block lg:opacity-0 lg:group-hover:visible lg:group-hover:opacity-100">
      {Object.entries(languages).map(([lang, label]) => (
        <li class="nav-dropdown-item">
        <a href={getSwitchLangUrl(lang, Astro.url)}>{label}</a>
      </li>
    ))}
    </ul>
  </li>
</ul>
